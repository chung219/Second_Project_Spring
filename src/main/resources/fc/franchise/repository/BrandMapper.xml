<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fc.franchise.repository.BrandMapper">

    <select id="findAll" resultType="brand">
        select 기준년도 as year,
        업종대분류명 as industryCategory,
        업종중분류명 as industryClassification,
        법인명 as industryName,
        브랜드명 as brandName,
        가맹점수 as franchisesNumber,
        신규가맹점등록수 as newBrandNum,
        계약종료수 as endCount,
        계약해지수 as cancelCount,
        평균매출금액 as avgSales
        from BRAND_FR_PRO
    </select>


    <select id="departure" resultType="brand">
        select 기준년도 as year,
        업종대분류명 as industryCategory,
        업종중분류명 as industryClassification,
        법인명 as industryName,
        브랜드명 as brandName,
        가맹점수 as franchisesNumber,
        신규가맹점등록수 as newBrandNum,
        계약종료수 as endCount,
        계약해지수 as cancelCount,
        평균매출금액 as avgSales,
        이탈률 as departureRate
        from BRAND_FR_PRO where 이탈률>0 and ROWNUM BETWEEN 1 AND 10 order by 이탈률
--     이탈률이 적은 순위 1 ~ 10위
--     (계약종료수 + 계약해지수) / DECODE(가맹점수 + 신규가맹점등록수,0,null,가맹점수 + 신규가맹점등록수) * 100,2
    </select>


</mapper>
